# Настройки для драйвера

Вы уже изучили предлагаемые настройки для каждого из драйверов. Понятно, что общие настройки могли бы содержать любые из настроек. Казалось бы, проще всего это сделать - перечислив каждую из возможностей.

Есть одна неприятность, в такой форме настройки придется заполнять данными независимо от типа драйвера. Даже если мы выбираем драйвер в оперативной памяти, который вообще не требует настроек, на придется заполнить чем-то ключи для облачного и браузерного хранилища.

Но мы можем поступить иначе.

## различимые объединения - discriminating unions

Воспользуемся способностью TypeScript различать значения объединенных типов. Составим тип `Settings` как объединение различимых интерфейсов. Теперь нам достаточно узнать значение поля `type` и реализация функции `createStorageInternal` распадается на простейшие веточки.

Вы можете убедиться, что TypeScript действительно знает и подсказывает вам в настройках, как только вы объявите о своем желании использовать тот или иной драйвер.

В этом подходе, оператор switch выступает как защитник в деле проверки допустимости различимых значений объединения.  

## Специальные защитники

Во время создания драйвера могут произойти ошибки. Обычно, JavaScript исключения имеют тип `Error` но это не точно и не всегда. Поэтому TypeScript считает значение переменной ошибки в выражении catch - тип `unknown`.

Посмотрим, как мы можем работать с этим значением.

Перед тем, как перейти к следующему шагу - поменяйте `const type = 'cloud'` на `let type = 'cloud'` в файле _main.ts_
