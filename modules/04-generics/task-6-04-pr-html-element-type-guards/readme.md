# Использование собственных функций защиты тип

## Исходная информация

Для ускоренного создания однородных форм на предприятии создана система, где программная часть формы описывается картой настроек. Каждый ключ карты соответствует имени интерактивного HTML-элемента (button, input, select, textarea), а значением является словарь методов (смотрим [`ListenerFactory`](https://codesandbox.io/s/task-4-2-module-4-jx2i6?file=/src/i-face-listener-factory.ts)). Как любая прослойка, эта система упрощает создание форм и при этом ограничивает возможности по визуализации HTML. Считается, что для корпоративного бизнес-приложения это приемлемо.

В корпоративных целях унифицированы события жизненного цикла элементов формы.

При создании экземпляра формы (во время работы приложения) специальная функция создаёт обёртки вокруг унифицированных событий жизненного цикла. После этого появляются обработчики стандартных событий HTML. Эти обработчики помещаются в объект типа [i-face-field-map.ts](https://codesandbox.io/s/task-4-2-module-4-jx2i6?file=/src/i-face-field-map.ts).

```ts
export interface FieldMap {
  [formField: string]: ListenerFactory;
}
```

## Задача

Ваша задача: создать функцию [`bindForm`](https://codesandbox.io/s/task-4-2-module-4-jx2i6?file=/src/binder.ts), которая реализует интерфейс [Binder](https://codesandbox.io/s/task-4-2-module-4-jx2i6?file=/src/i-face-binder.ts), а также соединит стандартные события HTML и предоставленные в настройках бизнес-правила.

```ts
export interface Binder {
  (form: MemoizedHandlers, container: HTMLFormElement): Unsubscribe;
}
```

Для элементов `HTMLButtonElement` и `HTMLInputElement` (type=checkbox) следует слушать событие `click`. Для остальных интерактивных элементов следует использовать событие `input`.

Функция должна возвращать объект, пригодный для отмены подписок, если таковые были сделаны.

События следует подключать только к элементам:

- button,
- input,
- select,
- textarea.

При выполнении задания установите флаг компилятора `strictFunctionTypes:true`.

## Идея для реализации

Мы создадим функцию редуктора для анализа каждого ключа из настроек. Редуктор будет подключать нужные события и при необходимости дополнять массив отмены подписок.
